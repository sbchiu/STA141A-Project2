---
title: "Project 2 Description"
author: "Team 7"
date: "`r Sys.Date()`"
output: html_document
---

***


## Abstract

Summarize analysis - to do after analysis


## Introduction

The dataset from the World Health Organization (WHO) consists of daily reported counts of cases and deaths due to COVID-19. We also referenced the Monthly Transportation Statistics from the Bureau of Transportation Statistics for data on seasonally adjusted domestic airline traffic. In this data analysis, we are primarily interest in the following questions: what is the relationship between domestic U.S. airport traffic and COVID-19 cases and deaths. The data analysis will distinguish if airflight affects COVID-19 cases. This will indicate if increased travel contributes to a rise of cases and deaths, primarily to community transmission.

# Background

Review the background of the coronavirus.

This data analysis utilizes the two following datasets: the WHO COVID-19 Dashboard and the Monthly Transportation Statistics. 

The WHO has consistently collected data from around the world during the COVID-19 pandemic. The WHO dataset reports daily confirmed counts by countries, territories, and areas. Counts starting from December 31, 2019 to March 21, 2020 were taken from International Health Regulations (IHR) and thereafter, the confirmed counts are continuously compiled from global data on WHO dashboards of the headquarters and different regions. Daily counts may vary between countries, territories, and areas due to different sources, cut-off times, case detections, etc.

The WHO COVID-19 dataset used in the analysis contains daily updated counts of cases and deaths with the following variables: the reporting date, country code, country, WHO region, new cases count, cumulative cases to date, new deaths count, and cumulative deaths to date.

The Monthly Transportation Statistics dataset compiles statistics of transportation from the Federal Government and transportation industry. The Bureau of Transportation Statistics has reported monthly data since January 1947 to date. The dataset contains monthly updated statistics with variables, such as highway fuel price of regular gasoline, number of people unemployed, and the domestic airline traffic, which is the primary variable of this data analysis.


```{r include = F, echo = FALSE}
library(dplyr)
library(tibble)
library(tidyverse)
library(ggplot2)
library(car)
library(stringr)
library(readr)
knitr::opts_chunk$set(fig.pos = 'H')
```

```{r, message = FALSE, results = FALSE, warning = FALSE}
monthly_flights = read_csv("Monthly_Transportation_Statistics.csv") 
new_data <- tidyr::separate(monthly_flights, Date, c("date", "time"), sep = " ")

new_flight_data <- new_data[,c(1:3,7,9,45:47,92,98,100,129,133)]

names(new_flight_data)<-str_replace_all(names(new_flight_data), c(" " = "_"))


WHO_COVID_19_global_data <- read_csv("https://covid19.who.int/WHO-COVID-19-global-data.csv")
us_covid_data <- filter(WHO_COVID_19_global_data, Country %in% "United States of America") 
```

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(plotly)
us_covid_data %>% 
  filter(Date_reported>= "2020-03-01", Date_reported<= "2020-11-30") %>% 
  group_by(Date_reported,WHO_region) %>%   summarize(deaths = sum(New_deaths),
            cases = sum(New_cases)) %>% 
  mutate(Days_03.20_11.20 = Date_reported- as.Date("2020-03-01")) %>%
  plot_ly(
    x= ~cases,
    y= ~deaths,
    frame = ~Days_03.20_11.20,
    text=~WHO_region,
    hoverinfo="WHO_region",
    color=~WHO_region,
    type = 'scatter',
    mode = 'markers',
    showlegend = T
  )
```

```{r, echo = FALSE}
fig2 <- us_covid_data %>% 
  filter(Date_reported>= "2020-03-01", Date_reported<= "2020-11-30") %>% 
  mutate(Date=as.Date(Date_reported)) %>%
  ggplot(aes(x=Date,y=New_cases,by=Country)) +
  geom_line(aes(color=Country)) +
  theme(legend.position ='none')
fig2   
```

```{r}
fig3 <- us_covid_data %>% 
  filter(Date_reported>= "2020-03-01", Date_reported<= "2020-11-30", WHO_region=="AMRO") %>% 
  ggplot(aes(x=New_cases,y=New_deaths)) +
  geom_point()+
  geom_text(aes(label = " "), hjust=0, vjust=0)
fig3
```

```{r}
fig4 <- us_covid_data %>% 
  filter(Date_reported>= "2020-03-01", Date_reported<= "2020-11-30", WHO_region=="AMRO") %>% 
  ggplot(aes(x=Cumulative_cases,y=Cumulative_deaths)) +
  geom_point()+
  geom_text(aes(label=""),hjust=0, vjust=0)
fig4
```


## Descriptive Analysis

Explore this dataset and generate summary statistics that you find informative, and explain your findings. <span style="color:red"> The summary statistics should include at least time, number of cases, number of death, case-mortality rate.</span>


## Inferential Analysis 

Propose an appropriate model to answer the questions of interest. 
a. Explain your notations. 
b. State assumptions for your model. 
c. Explain why your model is appropriate for this task. 

Fit the proposed model in (4) and explain your results.

## Sensitivity Analysis

Conduct model diagnostics

## Discussion

Conclude your analysis with a discussion of your findings and caveats of your approach.

## References

WHO coronavirus disease (COVID-19) dashboard. Geneva: World Health Organization, 2020. Available online: https://covid19.who.int/ 




